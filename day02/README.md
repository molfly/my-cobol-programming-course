# Day 02
## Using Variables and Constants

DATA DIVISION - критический предмет для понимания в COBOL. Сегодняшний урок охватывает основы, но вы будете снова и снова возвращаться в DATA DIVISION на протяжении всей этой книги.

* Сегодня вы узнаете о следующих темах: Что такое константа?
* Что такое переменная?
* Определение числовых переменных в COBOL.
* Именование переменных в COBOL.
* Подробнее об использовании DISPLAY.
* Определение и использование переменных.
* Определение картинок.
* Использование глагола MOVE.
* Форматирование вывода.
* Советы по расположению и пунктуации.
* Продолжение персонажей.

## Что такое константа?
Данные в программах на языке COBOL делятся на две большие категории: константы и переменные.

Определение числовых переменных в COBOL
Ниже приведен пример числовой переменной COBOL. Имена переменных используют те же символы, что и имена абзацев: от A до Z, от 0 до 9 и дефис (-). Это более подробно описано в разделе «Именование переменных в COBOL» далее в сегодняшнем уроке.
`001400 01  THE-NUMBER              PICTURE IS 9999.`
Определение переменной COBOL содержит как минимум три части:
* The level number
* The name
* The PICTURE

В синтаксисе номер уровня равен 01. На данный момент каждая переменная, которую вы будете использовать, будет иметь номер уровня 01. Номер уровня 01 должен находиться в области A, столбцы с 8 по 11. В предыдущем фрагменте кода 01 начинается в столбце 8.

Вторая часть определения переменной - это имя переменной, в данном случае это THE-NUMBER. Это имя данных, используемое для идентификации переменной. Имя данных присваивается программистом. Переменная будет называться по имени данных THE-NUMBER в любом месте программы, где переменная должна быть установлена ​​или изменена. Имя переменной должно начинаться в области B, столбцы с 12 по 72. В этом примере THE-NUMBER начинается в столбце 12.

PICTURE определяет две вещи для переменной: размер переменной (количество байтов, используемых в памяти для значения) и тип данных, которые могут храниться в переменной. В этом примере рисунок 9999 указывает, что четыре цифровых символа могут быть сохранены в переменной с именем THE-NUMBER. Аналогично, переменная с PICTURE IS 99 может содержать два числовых символа. Предложение PICTURE IS и фактическое изображение 9999 должны начинаться где-то в области B, столбцы с 12 по 72.

Предложение PICTURE IS в определении переменной является синтаксисом COBOL для представления размера переменной и типа данных, которые содержит переменная.
9999 на рисунке не указывает, что переменная содержит значение 9999. Это указывает на то, что переменная может использоваться для числовых значений в диапазоне от 0 до 9,999. Изображение 9999 указывает, что в этой переменной можно сохранить четыре цифры. Изображение 9999 будет содержать любое из значений от 0 до 9,999. Значения 17 и 6489 оба будут соответствовать THE-NUMBER, но значение 65 413 слишком велико.

Посмотрите на Листинг 2.4, add01.cbl, для общего формата программы, теперь, когда она содержит переменные. В этой программе создаются три переменные: FIRST-NUMBER, SECOND-NUMBER и THE-RESULT. Каждая переменная имеет номер уровня 01. Первые два имеют изображения от 99 и будут содержать значения в диапазоне от 0 до 99. Третья переменная, THE-RESULT, имеет изображение от 999 и будет содержать значения от 0 до 999. Еще раз предложение PICTURE IS не устанавливает значение переменной; он устанавливает только самые большие и самые маленькие значения, которые может содержать переменная, и тот факт, что переменная будет содержать числовые данные.

Делать - не делать: DO предшествует слову SECTION по крайней мере с одним пробелом (WORKING-STORAGE SECTION).
НЕ предшествуйте РАЗДЕЛУ с дополнительным дефисом (WORKING-STORAGE-SECTION).

## Naming Variables in COBOL
Имена переменных COBOL аналогичны именам абзацев и разделов, потому что они могут использовать любой из прописных букв алфавита, цифры от 0 до 9 и дефис (но не в качестве начального символа). Имена переменных и абзацев COBOL ограничены 30 символами. В таблице 2.1 приведены некоторые примеры допустимых и недействительных имен переменных.

### таблица 2.1

## Подробнее об использовании DISPLAY
Глагол DISPLAY можно использовать для отображения более одного значения за раз, например:
DISPLAY "The result is " THE-RESULT.
Этот способ используется в листинге 2.5, add02.cbl. Единственное изменение в этой программе состоит в том, что строки 002600 и 002700 были объединены в одну строку DISPLAY, а двоеточие (:) в сообщении заменено пробелом.

Суть: DISPLAY позволяет выводить строки и константы.

## Определение и использование переменных
Когда вы определяете переменную в разделе WORKING-STORAGE SECTION в DATA DIVISION, вы предоставляете компилятору информацию о размере переменной и типе данных, которые в ней могут храниться.

Числовая переменная используется для хранения чисел. Символ изображения, используемый для представления цифры в числовой переменной, равен 9, как в этом примере:
```
01  THE-NUMBER          PICTURE IS 99.
```

Буквенно-цифровые данные содержат один или несколько печатных символов. Некоторые примеры буквенно-цифровых значений: `Hello, ??506^%$A, and 123-B707`. Буквенно-цифровая переменная определяется так же, как и числовая переменная, за исключением того, что символ изображения, используемый для представления одного буквенно-цифрового символа, представляет собой X. В следующем примере синтаксиса определяется буквенно-цифровая переменная, которая может содержать слово или сообщение длиной не более 10 символов:
```
001200 01 THE-MESSAGE     PICTURE IS XXXXXXXXXX.
```

Буквенно-цифровая переменная также может использоваться для хранения чисел (например, для хранения 123 в переменной PICTURE IS XXX), но вы не сможете использовать значения в качестве чисел. Например, вы можете отобразить переменную PICTURE IS XXX, содержащую 123, но вы не можете использовать глагол COMPUTE, чтобы добавить 1 к нему.

В листинге 2.6 модифицированная версия hello.cbl с именем hello02.cbl иллюстрирует использование буквенно-цифровых переменных.

## Defining Pictures

До сих пор вы определили небольшие переменные, но вы также можете определить более длинные переменные в COBOL. Числовые переменные могут быть до 18 цифр:
```
01  THE-NUMBER     PICTURE IS 999999999999999999.
```

Числовые переменные ограничены 18 цифрами, но длина буквенно-цифровых переменных ограничена имеющейся у вас версией COBOL. LPI COBOL имеет ограничение в 32 767 символов. ACUCOBOL имеет ограничение в 65 520 символов. Компилятор Professional Micro Focus COBOL (старший брат Micro Focus Personal COBOL) имеет ограничение в 256 миллионов символов.

Определение длинных переменных может стать утомительной задачей, если все X и 9 должны быть прописаны явно; и ввод в длинных строках X или 9 может привести к ошибкам. Кроме того, необходимость набирать PICTURE IS для каждой переменной может утомить большие программы. К счастью, COBOL допускает некоторые сокращения, которые делают задачу менее громоздкой.

Слово IS в PICTURE IS является необязательным, а слово PICTURE может быть сокращено как PIC. Это сокращение
используется настолько часто, что редко можно увидеть программу, содержащую PICTURE IS:
```
01  THE-MESSAGE     PIC XXXXXX.
```

Вторая аббревиатура еще более полезна. Само изображение может быть сокращено путем ввода одного символа изображения с последующим количеством повторений этого символа в скобках. Таким образом, PIC XXXXXX становится PIC X (6), а PIC 99999 становится PIC 9 (5). Показанный ранее 18-значный номер становится следующим:
```
01  THE-NUMBER     PIC 9(18).
```

Это работает, даже когда повторение равно единице, поэтому можно описать PIC X как PIC X (1). Когда вы читаете листинг, иногда проще быстро определить размер переменной, отсканировав значения в скобках. Некоторые программисты практикуют всегда включать размер в круглые скобки.

Если вы хотите использовать сокращения для сокращения нажатий клавиш, сокращайте все, что превышает четыре. PIC XXXX и PIC X (4) требуют одинакового количества нажатий клавиш, поэтому для скорости печати не имеет значения, какой вы используете. PIC X быстрее печатать, чем PIC X (1), но PIC X (5) быстрее печатать, чем PIC XXXXX.

Вы можете обнаружить, что использование скобок продиктовано руководством по стилю компании, которая использует программу. Если это для вашего собственного использования, выберите тот, который вам удобнее.

## Представляя глагол MOVE

Глагол MOVE в языке COBOL - это глагол общего назначения, используемый для хранения значения в переменной. Общий синтаксис для MOVE следующий:
```
MOVE value TO variable.
```

В этом синтаксисе переменная должна быть переменной, определенной в DIVISION DATA, а значение может быть другой переменной или константой.
Вот некоторые примеры:
```
MOVE 12 TO THE-NUMBER.
MOVE ONE-NUMBER TO ANOTHER-NUMBER.
MOVE "XYZ" TO THE-MESSAGE.
```

MOVE используется для задания переменной определенного значения. Например, если вы собираетесь использовать переменную THE-COUNTER в качестве счетчика и вам нужно, чтобы счетчик начинался с 1, вы можете использовать следующее как один из методов установки переменной со начальным значением:
```
MOVE 1 TO THE-COUNTER.
```

MOVE in COBOL физически не перемещает память из одного места в другое. Он копирует значения из исходной переменной и сохраняет их в целевой переменной. Таблица 2.2 описывает влияние некоторых различных примеров MOVE, которые перемещают константы и переменные в переменные. Предполагается, что все переменные определены в WORKING-STORAGE SECTION.

Листинг 2.7 - это программа, предназначенная исключительно для предоставления примеров глагола MOVE. Он сочетает в себе аббревиатуры PICTURE, несколько операторов DISPLAY и MOVE для отображения двух сообщений с номерами сообщений на экране. Это даст вам дополнительное представление об использовании и эффектах MOVE.