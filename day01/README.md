# Day 01

## Your First COBOL Program

Когда вы начнете свою первую неделю обучения, чтобы стать программистом на COBOL, вы начнете понимать, почему COBOL является одним из наиболее часто используемых языков программирования, несмотря на то, что он является одним из старейших. Помимо знакомства с редактором и структурой языка, вы обнаружите, что наиболее важным инструментом является опыт. Опыт приобретается только благодаря тому, что делаешь. Обучение на практике рассматривается многими как наиболее эффективная форма обучения. Эта книга призвана побудить вас выполнить множество реальных задач в темпе, рассчитанном на новичка.

Что такое COBOL?
COBOL - это язык программирования, специально предназначенный для решения бизнес-задач. В процессе работы с этой книгой вы увидите, что COBOL решает гораздо больше, чем просто бизнес-проблемы, и может использоваться в качестве решения многих проблем обработки данных.

Интересно, что предыдущий спрос на COBOL программистов был перед 2000 годом.

Приблизительно 90% всего кода COBOL выполняется в символьной среде, что означает, что большинство экранов COBOL имеют ширину 80 столбцов и высоту 24 или 25 символов и не содержат графики.


Программа "Hello World"
Программа «Привет, мир!» Стала почти банальной. Написание программы, которая выводит на экран «Hello world», обычно является первой программой, которую вы изучаете на любом языке. Листинг 1.1 - это базовая программа на языке COBOL, которая отображает «Hello world». Формат программы на языке COBOL описан в следующих разделах.

АНАЛИЗ: программа на языке COBOL всегда содержит четыре раздела. Эти четыре подразделения всегда имеют одинаковые имена:

* IDENTIFICATION DIVISION
* ENVIRONMENT DIVISION
* DATA DIVISION
* PROCEDURE DIVISION

В листинге day01.cbl строки 000100 и 000200 являются ИДЕНТИФИКАЦИОННЫМ ОТДЕЛЕНИЕМ. Этот раздел используется для определения основной информации о программе. В этом примере ИДЕНТИФИКАЦИОННОЕ ОТДЕЛЕНИЕ содержит только ИД ПРОГРАММЫ, ПРИВЕТ.
Строка 000300 - это ОТДЕЛ ОКРУЖАЮЩЕЙ СРЕДЫ, который используется для определения среды, в которой работает программа. Помните, что COBOL предназначен для работы на разных типах машин, и этот раздел используется для обработки различий между компьютерами. В этом случае программа не имеет специальных требований к машине, поэтому ОТДЕЛ ОКРУЖАЮЩЕЙ СРЕДЫ пуст.
Строка 000400 - это DATA DIVISION, который будет содержать любые данные, с которыми работает программа. Эта программа не имеет данных, поэтому DATA DIVISION пуст.
Линии 000500 - 001100 являются ПРОЦЕДУРНЫМ ОТДЕЛЕНИЕМ. Это основная часть программы - та часть, которая выполняет работу, намеченную программистом. ПОДРАЗДЕЛЕНИЕ ПРОЦЕДУРЫ содержит два абзаца в строке 000700 (НАЧАТЬ ПРОГРАММУ) и в строке 001000 (ГОТОВО в ПРОГРАММЕ). У термина параграф есть специальное определение в языке COBOL, которое будет рассмотрено чуть позже на сегодняшнем уроке. Вся фактическая работа в этой программе выполняется по линии 000800.

Прежде чем начать печатать, вы должны отметить пару вещей. Первые шесть позиций символов каждой строки используются для нумерации строк. Седьмая позиция символа всегда пуста. Команды в строках 000800 и 001100 начинаются с позиции 12. Все остальное начинается с позиции 8.

DON'T make typing errors. 

IDENTIFICATION DIVISION отмечает начало программы COBOL. Имя программы, которую вы назначаете, будет введено в качестве оператора в IDENTIFICATION DIVISION.
ENVIRONMENT DIVISION содержит операторы или команды для описания физической среды, в которой работает программа. Основное использование ENVIRONMENT DIVISION - описание физической структуры файлов, которые будут использоваться в программе.
DATA DIVISION содержит утверждения, описывающие данные, используемые программой. DATA DIVISION и PROCEDURE DIVISION являются наиболее важными подразделениями в программе COBOL; они делают 95 процентов работы.
PROCEDURE DIVISION содержит операторы COBOL, которые программа выполнит после запуска программы. PROCEDURE DIVISION - настоящая рабочая лошадка программы COBOL. Без PROCEDURE DIVISION у вас не было бы программы, потому что все остальные подразделения используются для создания среды и данных, которые используются PROCEDURE DIVISION, чтобы действительно что-то делать.

Каждый DIVISION в программе COBOL разбивается на более мелкие единицы, как наброски. Вкратце, DIVISION может содержать SECTION, SECTION может содержать paragraphs, а параграфы могут содержать sentences.

SECTION - раздел.
paragraphs - параграф.
sentences - сентенция/предложение.

Требования к содержанию каждого отдельного DIVISION могут различаться, но большинство компиляторов требуют, чтобы в программе COBOL присутствовали только две вещи - кроме четырех разделов - для того, чтобы скомпилировать ее:
* PROGRAM-ID
* STOP RUN

PROGRAM-ID - это абзац, который должен появляться в ИДЕНТИФИКАЦИОННОМ РАЗДЕЛЕ и использоваться для присвоения имени программе.
Также должен быть один абзац в разделе PROCEDURE, который содержит оператор STOP RUN.

На самом деле, Minimum.cbl ничего не делает, кроме остановки работы, как только он запускается. Его единственная функция - показать минимальный синтаксис, который будет принимать компилятор COBOL.

Делать - не делать: сопоставлять имя файла и имя программы; например, sentnces.cbl - это имя файла, а SENTNCES - это PROGRAM-ID.
НЕ добавляйте путаницу, используя PROGRAM-ID, который отличается от имени файла.

Все специальные слова в языке COBOL (такие как PROGRAM-ID, DATA, DIVISION, STOP и RUN), а также имена абзацев и название программы (такие как SENTNCES, PROGRAM-BEGIN и PROGRAM-DONE) создаются с использованием заглавные буквы алфавита от A до Z, цифры от 0 до 9 и дефис (-). Дизайнеры COBOL решили использовать дефис как способ улучшить читаемость слов на языке COBOL. PROGRAM-BEGIN легче читать, чем PROGRAMBEGIN.

Файл исходного кода COBOL имеет пять областей, простирающихся слева направо по всей странице. Первые шесть символов или столбцов строки называются областью порядкового номера. Эта область не обрабатывается компилятором, или, если она обрабатывается, она выдает только предупреждения о том, что числа не совпадают (если они есть).

Позиция символа 7 называется индикаторной зоной. Эта седьмая позиция обычно пуста. Если в этом столбце есть звездочка, компилятор игнорирует все остальное в этой строке. Это используется как метод для включения комментариев в ваш файл исходного кода.

Позиция символа 7 называется индикаторной зоной. Эта седьмая позиция обычно пуста. Если в этом столбце есть звездочка, компилятор игнорирует все остальное в этой строке. Это используется как метод для включения комментариев в ваш файл исходного кода.

Четыре позиции символов с 8 по 11 называются областью А. DIVISION и абзацы (paragraphs) (и SECTION) должны начинаться в области А. Хорошей практикой кодирования является запуск DIVISION, SECTION и названий абзацев (paragraph names) в столбце 8, а не случайное место в области А.

Позиции символов с 12 по 72 называются областью B. Предложения должны начинаться и заканчиваться в области B. Хорошей практикой кодирования является начало предложений в столбце 12, а не в произвольном месте в области B.

COBOL был разработан как язык из 80 столбцов, но формального определения позиций символов не существует 73 до 80. Это называется областью идентификации (которая не имеет ничего общего с IDENTIFICATION DIVISION).

Область идентификации предоставляется разработчику компилятора COBOL для использования по мере необходимости. Редакторы COBOL на больших компьютерах обычно позволяют определить восьмисимвольный код модификации, который вставляется в область идентификации при каждом изменении строки или добавлении новой строки.

Если вы добавляете строки в существующую программу или изменяете существующие, может быть полезно узнать, какие строки были изменены. Коды модификации могут использоваться для отслеживания того, где было сделано конкретное изменение. Коды модификации особенно полезны в компаниях, где многие программисты могут работать над многими файлами. Это помогает отслеживать изменения, когда они произошли и кто их сделал.

Что такое Shell Program?
Поскольку COBOL имеет определенный минимальный объем кода, который требуется для всех программ, рекомендуется поддерживать программу COBOL, которая содержит минимальные требования.

Q&A

Q: Почему так много Кобола в верхнем регистре?
A: COBOL был разработан в те дни, когда компьютерные терминалы и машины для перфорирования клавиш использовали только заглавные буквы. Весь язык был определен в терминах этого положения в верхнем регистре. Вы можете отображать сообщения в верхнем и нижнем регистре, такие как Hello world, потому что терминалы теперь имеют возможность прописных и строчных букв. Однако фактические элементы COBOL - DIVISION, названия абзацев, такие как PROGRAM-BEGIN, и глаголы, такие как DISPLAY - изначально были разработаны только в верхнем регистре.

Q: Что делает пустая строка в программе?
A: Ничего. Компилятор пропускает пустые строки. Вы можете поставить пустые строки в любом месте программы, чтобы улучшить читаемость.

Q: Использует ли COBOL номера строк?
A: Да, но они не являются обязательными. Большинство компиляторов игнорируют их или могут быть настроены на их игнорирование. Некоторые компиляторы на больших компьютерах обрабатывают номера строк и выдают предупреждение, если номера строк не совпадают, но это не ошибка.

Q: Могу ли я добавить что-нибудь в комментарии?
A: Да. Пока звездочка появляется в столбце 7, все, что после звездочки, игнорируется и не влияет на компилятор. Вы можете написать английские предложения или трюк, хотя обычной практикой является предоставление некоторой информации, которая описывает, что делает программа, или почему она это делает.
Вы можете сделать это на столько строк, сколько необходимо для завершения комментария.

Q: Появятся ли мои комментарии в программе при запуске?
A: Нет. Комментарии появляются только в файле исходного кода, и они не будут включены в скомпилированную программу. Комментарии предназначены для документирования исходного кода. Компьютер может читать только скомпилированный код, и комментарии ничего не будут значить для компьютера, поэтому они не включены в получившуюся программу.

Q: Почему в названиях абзацев есть дефисы?
A: Имена абзацев в языке COBOL ограничены 30 символами и могут содержать только заглавные буквы (от A до Z), цифры (от 0 до 9) и дефис (-). Дефис используется для улучшения читабельности абзацев и названий данных (что рассматривается в День 2). Некоторые современные компиляторы позволяют вводить имена абзацев, имена разделов и другие элементы COBOL строчными буквами.

